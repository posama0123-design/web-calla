<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ã‚¬ãƒ©ã‚±ãƒ¼SMS - Realtime Edition</title>
    <style>
        body { background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: 'Hiragino Kaku Gothic ProN', sans-serif; }
        .phone { width: 280px; background: #444; border-radius: 20px; padding: 15px; border: 3px solid #666; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
        
        /* ç”»é¢ */
        .screen { background: #9dae8d; height: 320px; border: 10px solid #111; padding: 5px; display: flex; flex-direction: column; color: #1a1a1a; }
        .status-bar { font-size: 11px; display: flex; justify-content: space-between; border-bottom: 1px solid #7a8a6d; padding-bottom: 2px; }
        .clock { font-weight: bold; }
        
        .chat-log { flex: 1; font-size: 13px; overflow-y: auto; padding: 5px; background: rgba(0,0,0,0.05); }
        .msg-sent { text-align: right; color: #003366; margin-bottom: 5px; }
        .msg-received { text-align: left; color: #333; margin-bottom: 5px; font-weight: bold; }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-area { background: #fff; min-height: 45px; font-size: 16px; padding: 4px; border: 2px solid #555; margin-top: 5px; color: #000; word-break: break-all; }
        
        /* ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ */
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 15px; }
        button { background: linear-gradient(#eee, #ccc); color: #333; border: 1px solid #999; padding: 10px 0; border-radius: 6px; cursor: pointer; border-bottom: 3px solid #888; }
        button:active { transform: translateY(2px); border-bottom: 1px solid #888; }
        .key-num { font-size: 18px; font-weight: bold; display: block; line-height: 1; }
        .key-label { font-size: 10px; display: block; margin-top: 2px; color: #666; }
        
        .del-icon { color: #d00; font-weight: bold; }
        .send-btn { grid-column: span 3; background: linear-gradient(#5a5, #262); color: white; font-weight: bold; border-bottom: 3px solid #141; margin-top: 5px; height: 40px; }
    </style>
</head>
<body>

<div class="phone">
    <div class="screen">
        <div class="status-bar">
            <span>ğŸ“¶ åœå†…</span>
            <span class="clock" id="clock">00:00:00</span>
            <span>ğŸ”‹</span>
        </div>
        <div class="chat-log" id="chatLog">
            <div class="msg-received">å—ä¿¡ï¼šSMSã‚»ãƒ³ã‚¿ãƒ¼ã¸ã‚ˆã†ã“ã</div>
        </div>
        <div class="input-area" id="display"></div>
    </div>

    <div class="keypad">
        <button onclick="press('1')"><span class="key-num">1</span><span class="key-label">ã‚</span></button>
        <button onclick="press('2')"><span class="key-num">2</span><span class="key-label">ã‹</span></button>
        <button onclick="press('3')"><span class="key-num">3</span><span class="key-label">ã•</span></button>
        <button onclick="press('4')"><span class="key-num">4</span><span class="key-label">ãŸ</span></button>
        <button onclick="press('5')"><span class="key-num">5</span><span class="key-label">ãª</span></button>
        <button onclick="press('6')"><span class="key-num">6</span><span class="key-label">ã¯</span></button>
        <button onclick="press('7')"><span class="key-num">7</span><span class="key-label">ã¾</span></button>
        <button onclick="press('8')"><span class="key-num">8</span><span class="key-label">ã‚„</span></button>
        <button onclick="press('9')"><span class="key-num">9</span><span class="key-label">ã‚‰</span></button>
        <button onclick="press('*')"><span class="key-num">ï¼Š</span><span class="key-label">è¨˜å·</span></button>
        <button onclick="press('0')"><span class="key-num">0</span><span class="key-label">ã‚</span></button>
        <button onclick="clearInput()" class="del-icon">âŒ«</button>
        <button class="send-btn" onclick="sendMsg()">ãƒ¡ãƒ¼ãƒ«é€ä¿¡</button>
    </div>
</div>

<script>
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ™‚è¨ˆ
    function updateClock() {
        const now = new Date();
        const timeStr = now.getHours().toString().padStart(2, '0') + ":" + 
                        now.getMinutes().toString().padStart(2, '0') + ":" + 
                        now.getSeconds().toString().padStart(2, '0');
        document.getElementById('clock').innerText = timeStr;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // å…¥åŠ›ãƒ­ã‚¸ãƒƒã‚¯
    const mapping = {
        '1': ['ã‚', 'ã„', 'ã†', 'ãˆ', 'ãŠ'], '2': ['ã‹', 'ã', 'ã', 'ã‘', 'ã“'],
        '3': ['ã•', 'ã—', 'ã™', 'ã›', 'ã'], '4': ['ãŸ', 'ã¡', 'ã¤', 'ã¦', 'ã¨'],
        '5': ['ãª', 'ã«', 'ã¬', 'ã­', 'ã®'], '6': ['ã¯', 'ã²', 'ãµ', 'ã¸', 'ã»'],
        '7': ['ã¾', 'ã¿', 'ã‚€', 'ã‚', 'ã‚‚'], '8': ['ã‚„', 'ã‚†', 'ã‚ˆ', 'ï¼ˆ', 'ï¼‰'],
        '9': ['ã‚‰', 'ã‚Š', 'ã‚‹', 'ã‚Œ', 'ã‚'], '0': ['ã‚', 'ã‚’', 'ã‚“', 'ãƒ¼', 'ã€œ'],
        '*': ['ã€', 'ã€‚', 'ï¼Ÿ', 'ï¼', 'ãƒ»']
    };

    let lastKey = null;
    let index = 0;
    let currentText = "";
    let timer = null;

    function press(key) {
        if (lastKey === key) {
            index = (index + 1) % mapping[key].length;
            currentText = currentText.slice(0, -1) + mapping[key][index];
        } else {
            index = 0;
            currentText += mapping[key][index];
        }
        lastKey = key;
        updateDisplay();
        clearTimeout(timer);
        timer = setTimeout(() => { lastKey = null; }, 800);
    }

    function updateDisplay() {
        document.getElementById('display').innerText = currentText;
    }

    function clearInput() {
        if (currentText.length > 0) {
            currentText = currentText.slice(0, -1);
            updateDisplay();
        }
    }

    // SMSé€ä¿¡ãƒ»å—ä¿¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    function sendMsg() {
        if (!currentText) return;
        const log = document.getElementById('chatLog');
        
        // é€ä¿¡
        const sentDiv = document.createElement('div');
        sentDiv.className = 'msg-sent';
        sentDiv.innerText = "é€ä¿¡æ¸ˆï¼š" + currentText;
        log.appendChild(sentDiv);
        
        const tempMsg = currentText; // å¿œç­”ç”¨ã«ä¿æŒ
        currentText = "";
        updateDisplay();
        log.scrollTop = log.scrollHeight;

        // 1.5ç§’å¾Œã«è‡ªå‹•è¿”ä¿¡ï¼ˆSMSæ©Ÿèƒ½ã®å†ç¾ï¼‰
        setTimeout(() => {
            const replyDiv = document.createElement('div');
            replyDiv.className = 'msg-received';
            replyDiv.innerText = "å—ä¿¡ï¼šã€Œ" + tempMsg + "ã€äº†è§£ã—ã¾ã—ãŸã€‚";
            log.appendChild(replyDiv);
            log.scrollTop = log.scrollHeight;
        }, 1500);
    }
</script>

</body>
</html>
